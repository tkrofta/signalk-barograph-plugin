(self.webpackChunksignalk_barograph=self.webpackChunksignalk_barograph||[]).push([[812],{6893:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _e}});var n=a(624),r=a.n(n),l=a(9704),s=a(6813),i=a(7134),o=a(5697),c=a.n(o),m=a(5834),u=a(3832),d=a(1749),p=a(8677),f=a(2318),g=a(8715),h=a(7555),v=a(5108),b=r().memo((e=>{const t=(0,n.useContext)(i.default),a=(0,n.useContext)(i.BaroContext),l="xs"===e.layout?"small":"large";return v.log("Mode updated"),r().createElement(r().Fragment,null,a.config.elevation.current<=50||a.config.elevation.calc?r().createElement(f.Z,{className:e.classes.alert},r().createElement(p.Z,{className:e.classes.label,fontSize:l})):"Barometer"===t.type?r().createElement(f.Z,{className:e.classes.label},r().createElement(h.Z,{fontSize:"inherit",color:"white"})," ",a.config.elevation.current,"m"):r().createElement(g.Z,{className:e.classes.alert,iconMapping:{success:r().createElement(h.Z,{fontSize:"inherit",color:"inherit"})},color:"success",variant:"filled"},a.config.elevation.current," m"))})),E=a(7107),y=a(6608);const x=e=>{const t=(0,n.useContext)(i.BaroContext),[a,l]=(0,n.useState)(Date.now()),[s,o]=(0,n.useState)([e.classes.autoRefresh,e.classes.refreshStart]);if(null!==e.data&&e.data.timestamp!==a){let a=(0,y.getData)(e.data.pressure,t.config.unit);void 0!==a&&e.change(a),a=(0,y.getData)(e.data.trend,t.config.unit),void 0!==a&&e.trending(a),l(new Date(e.data.timestamp).getTime()),s[1]===e.classes.refreshStart?o([e.classes.autoRefresh,e.classes.refreshMid]):s[1]===e.classes.refreshMid?o([e.classes.autoRefresh,e.classes.refreshEnd]):o([e.classes.autoRefresh,e.classes.refreshStart])}return r().createElement(r().Fragment,null,r().createElement(f.Z,{className:e.classes.label},r().createElement(E.Z,{className:s,fontSize:"small"})))};x.propTypes={change:c().func.isRequired};var w=x,j=a(9895),Z=a(8365),k=a(4619),C=a(7342),S=a(5108),N=r().memo((e=>{const t=(0,n.useContext)(i.BaroContext);return S.log((t.environment?t.environment:"Pressure")+" updated"),r().createElement(r().Fragment,null,r().createElement(j.Z,{className:e.classes.paper},r().createElement(d.Z,{container:!0,direction:"column",justify:"space-between"},r().createElement(d.Z,{item:!0},r().createElement(d.Z,{container:!0,direction:"row",justify:"space-between"},r().createElement(f.Z,{className:e.classes.label,variant:"h6"},t.config.environment),r().createElement(f.Z,{className:e.classes.label,variant:"h6"},t.config.unit))),r().createElement(d.Z,{item:!0},r().createElement(f.Z,{gutterBottom:!0,variant:"h3"},void 0!==e.current&&null!==e.current?e.current.value:r().createElement(Z.Z,{animation:"wave"})))),r().createElement(k.Z,{borderTop:1,className:e.classes.box,borderColor:"main",spacing:1,display:"flex",alignItems:"left"},r().createElement(C.Z,{className:e.classes.label,fontSize:"small"}),r().createElement(f.Z,{className:e.classes.label,variant:"caption"},"  ",void 0!==e.current&&null!==e.current?"Last "+("xs"!==e.layout?" updated ":"")+new Date(e.current.time).toTimeString().split(" ")[0]:"waiting ..."))))})),P=a(796),z=a(1673),D=a(9594),I=a(5108),B=r().memo((e=>{I.log("Trend updated");const t=(0,n.useContext)(i.BaroContext),a="lg"===e.layout||"xl"===e.layout?"":t.config.unit,l=t.config.trending.threshold,s=t.config.trending.snap,o=null!==e.current?"NaN"===e.current.value?null:e.current.value:null;let c;if(null!==e.current&&""!==e.current.trending){let t="props.classes.label";switch(e.current.rotate){case 1:t="up"===e.current.trending?[e.classes.autoRefresh,e.classes.rotatep1]:[e.classes.autoRefresh,e.classes.rotatem1];break;case 2:t="up"===e.current.trending?[e.classes.autoRefresh,e.classes.rotatep2]:[e.classes.autoRefresh,e.classes.rotatem2];break;case 3:t="up"===e.current.trending?[e.classes.autoRefresh,e.classes.rotatep3]:[e.classes.autoRefresh,e.classes.rotatem3]}c="up"===e.current.trending?r().createElement(D.Z,{className:t,fontSize:"large"}):"down"===e.current.trending?r().createElement(z.Z,{className:t,color:"secondary",fontSize:"large"}):r().createElement(P.Z,{className:t,color:"primary",fontSize:"large"})}else c=o>=-1*s*l&&o<=s*l?r().createElement(P.Z,{color:"primary",fontSize:"large"}):o>l?r().createElement(D.Z,{className:e.classes.label,fontSize:"large"}):r().createElement(z.Z,{color:"secondary",fontSize:"large"});return r().createElement(r().Fragment,null,r().createElement(j.Z,{className:e.classes.paper},r().createElement(d.Z,{container:!0,direction:"column",justify:"space-between"},r().createElement(d.Z,{item:!0},r().createElement(d.Z,{container:!0,direction:"row",justify:"space-between"},r().createElement(f.Z,{className:e.classes.label,variant:"h6"},"Trend"),void 0!==e.data?r().createElement(w,{classes:e.classes,data:e.data,change:e.change,trending:e.trending}):r().createElement(f.Z,{className:e.classes.label,variant:"h6"},a))),r().createElement(d.Z,{item:!0},void 0===e.current||null===o?r().createElement(f.Z,{gutterBottom:!0,variant:"h3"},void 0!==e.current&&null!==o?o:r().createElement(Z.Z,{animation:"wave"})):r().createElement(d.Z,{container:!0,direction:"row",alignItems:"baseline",justify:"space-evenly"},c,r().createElement(f.Z,{gutterBottom:!0,variant:"h3"},o)))),r().createElement(k.Z,{borderTop:1,className:e.classes.box,borderColor:"main",spacing:1,display:"flex",alignItems:"left"},r().createElement(C.Z,{className:e.classes.label,fontSize:"small"}),r().createElement(f.Z,{className:e.classes.label,variant:"caption"},"  averaged from last ",s,"h"))))})),T=a(6426),F=a(5108),U=r().memo((e=>(F.log("Prediction updated"),r().createElement(r().Fragment,null,"info"===e.prediction.type||"warning"===e.prediction.type||"alert"===e.prediction.type?r().createElement(g.Z,{className:e.classes.alert,severity:"alert"===e.prediction.type?"error":e.prediction.type,variant:"filled"},e.prediction.value):r().createElement(g.Z,{className:e.classes.alert,iconMapping:{success:r().createElement(T.Z,{fontSize:"inherit",color:"inherit"})},color:"success",variant:"filled"},e.prediction.value)))));const A=(0,a(1120).Z)((e=>({root:{margin:0,height:"94vh",flexgrow:1,color:e.palette.text.main,backgroundColor:e.palette.primary.dark,padding:e.spacing(1)},header:{padding:"0px",maxHeight:"10vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"calc(10px + 2vmin)",color:"white"},container:{padding:"20px",minHeight:"90vh",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",fontSize:"calc(10px + 1vmin)",backgroundColor:e.palette.primary.dark},paper:{width:"100%",height:"100%",minHeight:"calc(10px + 7vmin)",padding:e.spacing(1),textAlign:"center",color:e.palette.text.main,backgroundColor:e.palette.primary.dark},time:{minHeight:"calc(9px + 4vmin)",marginTop:"1vmin",padding:0,textAlign:"bottom",color:e.palette.text.main,backgroundColor:e.palette.primary.dark},messages:{minHeight:"calc(10px + 7vmin)",marginTop:"1vmin",padding:0,textAlign:"bottom",color:e.palette.text.main,backgroundColor:e.palette.primary.dark},label:{color:e.palette.text.dark},placeholder:{justifyContent:"center"},box:{borderColor:e.palette.primary.main,color:e.palette.primary.main},card:{width:"32%",height:"80%",padding:0,backgroundColor:e.palette.primary.dark,color:e.palette.text.main},alerts:{marginTop:"5px",width:"100%","& > * + *":{marginTop:e.spacing(2)}},alert:{marginTop:"1vmin"},autoRefresh:{transition:e.transitions.create(["transform"],{duration:e.transitions.duration.short})},refreshStart:{transform:"rotate(0)"},refreshMid:{transform:"rotate(120deg)"},refreshEnd:{transform:"rotate(240deg)"},rotatep1:{transform:"rotate(90deg)"},rotatep2:{transform:"rotate(66deg)"},rotatep3:{transform:"rotate(33deg)"},rotatem1:{transform:"rotate(-90deg)"},rotatem2:{transform:"rotate(-66deg)"},rotatem3:{transform:"rotate(-33deg)"},slider:{thumb:{color:e.palette.text.main},track:{color:e.palette.text.dark},rail:{color:e.palette.primary.light}},graph:{backgroundColor:e.palette.primary.dark,graph:e.palette.primary.light,grid:e.palette.text.dark,text:e.palette.text.main,legend:e.palette.text.dark,title:e.palette.primary.main},dialog:{margin:0,backgroundColor:e.palette.primary.light,width:400,position:"absolute",textAlign:"left",color:e.palette.text.main,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(0,2,2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},footer:{backgroundColor:e.palette.primary.dark,padding:"0px",maxHeight:"5vh",display:"bottom",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"calc(10px + 0vmin)",color:e.palette.text.dark}})));var L=A;const M=e=>{const t=L(),[a,l]=(0,n.useState)(null),[s,o]=(0,n.useState)({value:null,trending:"equal",rotate:0}),c=(0,n.useContext)(i.default),[p,f]=(0,n.useState)(c.spacing);return r().createElement("div",{className:t.root},r().createElement(m.ZP,null),r().createElement(i.BaroContext.Provider,{value:{config:i.defaultConfig,setConfig:i.setConfig}},r().createElement(u.Z,{className:t.container},r().createElement(d.Z,{container:!0,spacing:p},r().createElement(d.Z,{item:!0,xs:12,sm:12,justify:"space-around"},r().createElement(d.Z,{container:!0,direction:"row",justify:"space-between"},r().createElement(b,{classes:t}),r().createElement(w,{classes:t,data:e.data,change:e=>{null!==e&&l(e)},trending:e=>{if(null!==e){let t=null!==(0,y.getLatest)().info.trending&&(0,y.getLatest)().info.trending.hasOwnProperty("severity")?(0,y.getLatest)().info.trending.severity:0,a={value:e.value,trending:t<=-1?"down":t>=1?"up":"equal",rotate:Math.abs(t)};o(a)}}}))),r().createElement(d.Z,{item:!0,xs:12,sm:12},r().createElement(N,{classes:t,current:a})),r().createElement(d.Z,{item:!0,xs:12,sm:12},r().createElement(B,{classes:t,current:s})),r().createElement(d.Z,{item:!0,xs:12,sm:12},r().createElement(U,{classes:t,prediction:e.info.prediction}))))))};M.propTypes={data:c().isRequired,info:c().isRequired};var R=M,O=a(2598),q=a(8884),$=a(2162);function H(){return H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},H.apply(this,arguments)}const W=()=>{},_=[W,W],Q=(0,n.createContext)(_);function J(){return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}const K=e=>{const{children:t,container:a,className:l,open:s,onClose:i}=e,[o]=(0,n.useState)(J);return r().createElement($.Z,{disableAutoFocus:!0,ref:a,open:s,onClose:i},r().createElement("div",{style:o,className:l},t))};function Y({children:e,container:t,classes:a}){const[l,s]=(0,n.useState)([]),i=()=>{s((e=>{const t=e.pop();return t?(t.onClose&&t.onClose(),[...e].concat({...t,open:!1})):e}))},o=(0,n.useRef)([e=>{const t={...e,open:!0};s((e=>[...e,t]))},i]);return(0,n.useEffect)((()=>{const e=l[l.length-1];e&&!e.open&&(e.onExited&&e.onExited(),s((e=>e.slice(0,e.length-1))))}),[l]),r().createElement(Q.Provider,{value:o.current},e,l.map(((e,n)=>{const{onClose:l,...s}=e;return r().createElement(K,H({key:n,container:t,className:a.dialog,onClose:i},s))})))}var G=a(7812),V=a(6210),X=a(4545),ee=a(5305),te=a(5108);const ae=r().memo((e=>{const[t,a]=(0,n.useState)(Date.now()),[l,s]=(0,n.useState)((0,ee.getInflux)());(0,n.useEffect)((()=>{const e=setInterval((()=>a(Date.now())),1e3);return()=>{clearInterval(e)}}),[]),(0,n.useEffect)((()=>{"influxDB not connected"===l&&s((0,ee.getInflux)())}),[t]),te.log("Time updated");const i=new Date(Date.now()).toString().match(/([A-Z]+[\+-][0-9]+)/)[1];return r().createElement(r().Fragment,null,r().createElement(j.Z,{className:e.classes.paper},r().createElement(d.Z,{container:!0,direction:"column",justify:"space-between"},r().createElement(d.Z,{item:!0},r().createElement(d.Z,{container:!0,direction:"row",alignItems:"center",justify:"space-between"},r().createElement(f.Z,{className:e.classes.label,gutterBottom:!0,variant:"caption"},"  ",i),r().createElement(f.Z,{className:e.classes.label,gutterBottom:!0,variant:"h6"}," "),void 0!==e.data?r().createElement(w,{classes:e.classes,data:e.data,change:e.change,trending:e.trending}):r().createElement(G.Z,{onClick:()=>{void 0!==e.reset?e.reset():alert("Reset not implemented!")}},r().createElement(V.Z,{className:e.classes.label,fontSize:"small"})))),r().createElement(d.Z,{item:!0},r().createElement(f.Z,{className:e.classes.time,gutterBottom:!0,variant:"h4"},void 0!==t&&new Date(t).toTimeString().split(" ")[0]))),r().createElement(k.Z,{borderTop:1,className:e.classes.box,borderColor:"main",spacing:1,display:"flex",alignItems:"left"},r().createElement(X.Z,{className:e.classes.label,fontSize:"small"}),r().createElement(f.Z,{className:e.classes.label,variant:"caption"}," ",l))))}));var ne=ae,re=a(6161),le=a(381),se=a.n(le),ie=({colors:e,scale:t,labelData:a,envData:l,title:s,layout:o})=>{const c=(0,n.useContext)(i.default),m="linear"===c.interpolation?0:"smooth"===c.interpolation?1:2,u=(0,n.useContext)(i.BaroContext),d=!o||"xs"!==o&&"lg"!==o&&"xl"!==o?u.config.unit:"",p={labels:a,datasets:[{label:" "+u.config.environment.toLowerCase()+" pressure",fontSize:18,fontColor:e.legend,data:l,fill:!1,pointRadius:0,backgroundColor:e.backgroundColor,borderColor:"#97C8EB",lineTension:m,borderWidth:2}]},f={responsive:!0,title:{display:""!==s,text:s,position:"bottom",fontColor:e.title,padding:0},scales:{xAxes:[{type:"time",distribution:"linear",offset:!0,time:t<=24?{unit:"minute",displayFormats:{hour:"HH:mm",minute:"HH:mm"}}:{unit:"hour",displayFormats:{day:"ddd",month:"MM",hour:"HH:mm",minute:"HH:mm"}},scaleLabel:{display:!0,fontColor:e.text},gridLines:{display:!0,color:e.grid},ticks:{major:{enabled:!0,fontStyle:"bold"},source:"data",autoSkip:!0,autoSkipPadding:75,maxRotation:0,sampleSize:100,fontColor:e.legend,fontSize:10},afterBuildTicks:function(e,t){if(null!==t){var a,n,r,l,s,i,o=e._majorUnit,c=t[0];for(r=se()(t[0].value),"minute"===o&&0===r.second()||"hour"===o&&0===r.minute()||"day"===o&&9===r.hour()||"month"===o&&r.date()<=3&&1===r.isoWeekday()||"year"===o&&0===r.month()?c.major=!0:c.major=!1,i=r.get(o),a=1,n=t.length;a<n;a++)l=t[a],s=(r=se()(l.value)).get(o),l.major=s!==i,i=s;return t}}}],yAxes:[{scaleLabel:{display:"xs"!==o,labelString:d,fontSize:18,fontColor:e.legend},ticks:{fontColor:e.text,beginAtZero:!1},gridLines:{display:!0,color:e.grid}}]},tooltips:{backgroundColor:e.backgroundColor,titleFontSize:10,bodyFontSize:10}};return r().createElement(r().Fragment,null,r().createElement(re.x1,{data:p,options:f}))},oe=a(2015),ce=a(4845),me=a(5108);function ue(e){return`${e}h`}function de(e){return pe[pe.findIndex((t=>t.value===e))].hours}const pe=[{value:15,hours:3,label:"3h"},{value:40,hours:48,label:"48h"},{value:60,hours:72,label:"3d"},{value:90,hours:168,label:"7d"}],fe=(0,oe.Z)({root:{color:"#5782A1",height:8},thumb:{height:12,width:12,backgroundColor:"#7DBBE6",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{color:"#5782A1",height:4,borderRadius:2},rail:{color:"#5782A1",height:4,borderRadius:2},mark:{"& *":{background:"transparent",color:"#7DBBE6"}},markLabel:{"& *":{background:"transparent",color:"#5782A1"}}})(ce.Z);var ge=e=>{me.log("Slider updated");const t=(0,n.useContext)(i.default);return r().createElement(r().Fragment,null,r().createElement(fe,{min:1,max:100,orientation:"vertical",defaultValue:(a=t.timescale,pe[pe.findIndex((e=>e.hours===a))].value),onChange:(t,a)=>{e.change(de(a))},valueLabelFormat:de,getAriaValueText:ue,"aria-label":"Restricted values","aria-labelledby":"discrete-slider-restrict",step:null,valueLabelDisplay:"auto",marks:pe}));var a},he=a(5108),ve=r().memo((e=>{he.log("Alert updated");let t=null!==e.alert?Math.abs(e.alert.severity)<=1?"info":Math.abs(e.alert.severity)<=3?"warning":"error":"msg",a=null!==e.alert?e.alert.tendency+" "+e.alert.changerate:"";return r().createElement(r().Fragment,null,"msg"!==t?r().createElement(g.Z,{className:e.classes.alert,severity:t,variant:"filled"},a):r().createElement(g.Z,{className:e.classes.alert,iconMapping:{success:r().createElement(T.Z,{fontSize:"inherit",color:"inherit"})},color:"success",variant:"filled"},a))})),be=a(5108),Ee=r().memo((e=>(be.log("Season updated"),r().createElement(r().Fragment,null,"info"===e.prediction.type||"warning"===e.prediction.type||"alert"===e.prediction.type?r().createElement(g.Z,{className:e.classes.alert,severity:"alert"===e.prediction.type?"error":e.prediction.type,variant:"filled"},e.prediction.season):r().createElement(g.Z,{className:e.classes.alert,iconMapping:{success:r().createElement(T.Z,{fontSize:"inherit",color:"inherit"})},color:"success",variant:"filled"},""!==e.prediction.season?e.prediction.season:r().createElement(Z.Z,{animation:"wave"})))))),ye=a(8463),xe=a(4697),we=a(9912),je=a(5108),Ze=r().memo((e=>(je.log("Front info updated"),r().createElement(r().Fragment,null,r().createElement(d.Z,{container:!0,direction:"row",spacing:1,justify:"space-between"},r().createElement(ye.Z,{className:e.classes.card},r().createElement(xe.Z,{className:e.classes.label,title:"Tendency",titleTypographyProps:{align:"left",color:"secondary",variant:"caption"}}),r().createElement(we.Z,null,"N/A"!==e.front.key?r().createElement(f.Z,{className:e.classes.label,variant:"body2"},e.front.tendency):r().createElement(Z.Z,{animation:"wave"}))),r().createElement(ye.Z,{className:e.classes.card},r().createElement(xe.Z,{className:e.classes.label,title:"Prognose",titleTypographyProps:{align:"left",color:"secondary",variant:"caption"}}),r().createElement(we.Z,null,"N/A"!==e.front.key?r().createElement(f.Z,{className:e.classes.label,variant:"body2"},e.front.prognose):r().createElement(Z.Z,{animation:"wave"}))),r().createElement(ye.Z,{className:e.classes.card},r().createElement(xe.Z,{className:e.classes.label,title:"Wind",titleTypographyProps:{align:"left",color:"secondary",variant:"caption"}}),r().createElement(we.Z,null,"N/A"!==e.front.key?r().createElement(f.Z,{className:e.classes.label,variant:"body2"},e.front.wind):r().createElement(Z.Z,{animation:"wave"})))))))),ke=a(282),Ce=a(9570),Se=a(4954),Ne=a(7162),Pe=a(553),ze=a(74),De=a(6083),Ie=a(9525),Be=a(6856),Te=a(9969),Fe=a(366),Ue=a(5108);function Ae(){return Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ae.apply(this,arguments)}var Le=e=>{const[t,a]=(0,n.useContext)(Q),l=(0,n.useContext)(i.default),s=(0,n.useContext)(i.BaroContext),[o,c]=(0,n.useState)(l.interpolation),[m,u]=(0,n.useState)(s.config.unit),[p,g]=(0,n.useState)(s.config.elevation),[h,v]=(0,n.useState)("default"),[b,E]=(0,n.useState)(!1),y=e=>{g({current:p.current,calc:e.target.checked}),(0,i.setConfig)({calc:e.target.checked}),v("Elevation")},x=e=>{u(e.target.value),(0,i.setConfig)({unit:e.target.value}),v("Unit")},w=e=>{E(o!==e.target.value),c(e.target.value),v("Interpolation")};(0,n.useEffect)((()=>{"default"!==h&&(a(),C(),Ue.log(h+" updated!"))}),[m,p,o]);const j=(0,oe.Z)(e.classes)((e=>{const{children:t,classes:a,onClose:n,...l}=e;return r().createElement(De.Z,Ae({disableTypography:!0,className:a.dialog},l),r().createElement(d.Z,{container:!0,direction:"row",alignItems:"baseline",justify:"space-between"},r().createElement(f.Z,{variant:"h5"},t),n?r().createElement(G.Z,{"aria-label":"close",className:a.closeButton,onClick:n},r().createElement(Fe.Z,null)):null))})),Z=(0,oe.Z)((e=>({root:{padding:e.spacing(2)}})))(Ie.Z),k=(0,oe.Z)((e=>({root:{margin:0,padding:e.spacing(1)}})))(Be.Z);function C(){t({children:r().createElement(r().Fragment,null,r().createElement(j,{id:"customized-dialog-title",onClose:()=>a()},"Display Settings"),r().createElement(Z,{dividers:!0},r().createElement(d.Z,{container:!0,direction:"row",alignItems:"baseline",justify:"space-between"},r().createElement(f.Z,{gutterBottom:!0},"Adjust to sea-level"),r().createElement(Ce.Z,{checked:p.calc,onChange:y,color:"secondary",name:"calc",inputProps:{"aria-label":"primary checkbox"}})),r().createElement(d.Z,{container:!0,direction:"row",alignItems:"center",justify:"space-between"},r().createElement(f.Z,null,"Pressure unit"),r().createElement(Se.Z,{component:"fieldset"},r().createElement(Ne.Z,{"aria-label":"unit",name:"displayUnit",value:m,onChange:x},r().createElement(Pe.Z,{value:"hPa",control:r().createElement(ze.Z,null),label:"hPa",labelPlacement:"start"}),r().createElement(Pe.Z,{value:"Pa",control:r().createElement(ze.Z,null),label:"Pa",labelPlacement:"start"}),r().createElement(Pe.Z,{value:"mbar",control:r().createElement(ze.Z,null),label:"mbar",labelPlacement:"start"}),r().createElement(Pe.Z,{value:"atm",control:r().createElement(ze.Z,null),label:"atm",labelPlacement:"start"})))),r().createElement(d.Z,{container:!0,direction:"row",alignItems:"center",justify:"space-between"},r().createElement(f.Z,null,"Graphical interpolation"),r().createElement(Se.Z,{component:"fieldset"},r().createElement(Ne.Z,{"aria-label":"interpolation",name:"graphInterpolation",value:o,onChange:w},r().createElement(Pe.Z,{value:"linear",control:r().createElement(ze.Z,null),label:"linear",labelPlacement:"start"}),r().createElement(Pe.Z,{value:"smooth",control:r().createElement(ze.Z,null),label:"smooth",labelPlacement:"start"}),r().createElement(Pe.Z,{value:"fancy",disabled:!0,control:r().createElement(ze.Z,null),label:"fancy",labelPlacement:"start"}))))),r().createElement(k,null,r().createElement(ke.Z,{autoFocus:!0,onClick:()=>{return t=e.save,void(b&&t({interpolation:o}));var t},color:"primary"},"Save settings"),r().createElement(ke.Z,{autoFocus:!0,onClick:()=>{return t=e.reset,a(),void(t&&(v("Reset"),t()));var t},color:"primary"},e.reset?"Reset now":"Close")))})}const S=function(e){const[t,a]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{t&&(e(),a(!1))}),[t,e,a]),()=>a(!0)}((()=>C()));return r().createElement(r().Fragment,null,r().createElement(G.Z,{onClick:S},r().createElement(Te.Z,{className:e.classes.label,fontSize:"large"})))};const Me=e=>{const t=L(),a=document.getElementById("app-panel"),l="lg"===e.width||"xl"===e.width,[s,o]=(0,n.useState)(null),[c,p]=(0,n.useState)({value:null,trending:"equal",rotate:0}),g=(0,n.useContext)(i.default),[h,v]=(0,n.useState)(g.timescale);let E=3600*i.defaultConfig.trending.snap/(g.interval/1e3),x=3600*Math.max(i.defaultConfig.trending.snap,h)*1e3;const[w,Z]=(0,n.useState)({}),k=e=>{e.length>E&&(e=e.slice(e.length-E,e.length)),S(e)},[C,S]=(0,n.useState)((()=>(0,ee.queryInflux)((0,ee.fluxQuery)("","",h),k)||[])),[P,z]=(0,n.useState)(g.spacing),D=e=>{v(e)},I=e=>{if(0===C.length)(0,ee.queryInflux)((0,ee.fluxQuery)("","",h),k);else if(null!==e&&(o(e),C.length<=10||e.time-C[C.length-1].time>=h*g.interval)){let t=[...C,e],a=Math.max(0,t.length-E);for(;t[a].time<e.time-x;)a++;a>0&&(t=t.slice(a+1,t.length)),S(t)}},T=e=>{if(null!==e){let t=null!==(0,y.getLatest)().info.trending&&(0,y.getLatest)().info.trending.hasOwnProperty("severity")?(0,y.getLatest)().info.trending.severity:0,a={value:e.value,trending:t<=-1?"down":t>=1?"up":"equal",rotate:Math.abs(t)};p(a)}},F=()=>{(0,ee.queryInflux)((0,ee.fluxQuery)("","",h),k)};return(0,n.useEffect)((()=>{const e=C.map((e=>e.time)),t=C.map((e=>e.value));Z({timestamp:e,value:t})}),[C]),(0,n.useEffect)((()=>{let e=h;E=3600*e/(g.interval/1e3),x=3600*Math.max(i.defaultConfig.trending.snap,e)*1e3,(0,ee.queryInflux)((0,ee.fluxQuery)("","",e),k)}),[h]),r().createElement(Y,{container:a,classes:t},r().createElement("div",{id:"barograph",className:t.root},r().createElement(m.ZP,null),r().createElement(i.BaroContext.Provider,{value:{config:i.defaultConfig,setConfig:i.setConfig}},"on"===g.header&&r().createElement(u.Z,{className:t.header},r().createElement(j.Z,{className:t.paper,xs:12,sm:12,md:12,lg:12,xl:12},r().createElement(f.Z,{className:t.header},"Barograph"))),l?r().createElement(u.Z,{className:t.container},r().createElement(d.Z,{container:!0,spacing:P,lg:12,xl:12},r().createElement(d.Z,{container:!0,direction:"row"},r().createElement(d.Z,{item:!0,lg:4,xl:4},r().createElement(d.Z,{container:!0,direction:"column"},r().createElement(d.Z,{item:!0,lg:12,xl:12},r().createElement(N,{classes:t,current:s,layout:e.width})),r().createElement(d.Z,{item:!0,lg:12,xl:12},r().createElement(B,{classes:t,current:c,layout:e.width})),r().createElement(d.Z,{item:!0,lg:12,xl:12},r().createElement(ne,{classes:t,data:e.data,change:I,trending:T,reset:F,layout:e.width})))),r().createElement(d.Z,{item:!0,lg:8,xl:8},r().createElement(j.Z,{className:t.paper},r().createElement(d.Z,{container:!0,direction:"row",spacing:1,sm:12,justify:"space-around"},r().createElement(d.Z,{xs:1,sm:1},r().createElement(ge,{colors:t.slider,change:D})),r().createElement(d.Z,{item:!0,xs:11,sm:11},r().createElement(ie,{colors:t.graph,scale:h,labelData:w.timestamp,envData:w.value,title:e.info.description,layout:e.width})))))),null!==e.info.front.key&&"N/A"!==e.info.front.key?r().createElement(d.Z,{container:!0,direction:"row",alignItems:"flex-end"},r().createElement(d.Z,{item:!0,sm:12,md:12,lg:4,xl:4},r().createElement(Ze,{classes:t,front:e.info.front})),r().createElement(d.Z,{item:!0,xs:12,sm:12,md:12,lg:8,xl:8},r().createElement(j.Z,{className:t.messages},r().createElement(d.Z,{container:!0,direction:"row",spacing:0,alignItems:"center",justify:"space-around"},r().createElement(ve,{classes:t,alert:e.info.trending}),r().createElement(Ee,{classes:t,prediction:e.info.prediction}),r().createElement(b,{classes:t,layout:e.width}),r().createElement(Le,{classes:t,reset:F,save:e.save}))))):r().createElement(d.Z,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12},r().createElement(j.Z,{className:t.messages},r().createElement(d.Z,{container:!0,direction:"row",spacing:0,alignItems:"center",justify:"space-around"},r().createElement(ve,{classes:t,alert:e.info.trending}),r().createElement(Ee,{classes:t,prediction:e.info.prediction}),r().createElement(b,{classes:t}),r().createElement(Le,{classes:t,reset:F,save:e.save})))))):r().createElement(u.Z,{className:t.container},r().createElement(d.Z,{container:!0,spacing:P},r().createElement(d.Z,{item:!0,xs:6,sm:4,md:4,lg:4,xl:4},r().createElement(N,{classes:t,current:s,layout:e.width})),r().createElement(d.Z,{item:!0,xs:6,sm:4,md:4,lg:4,xl:4},"xs"===e.width?r().createElement(B,{classes:t,current:c,data:e.data,change:I,trending:T,reset:F,layout:e.width}):r().createElement(B,{classes:t,current:c,layout:e.width})),r().createElement(O.Z,{xsDown:!0},r().createElement(d.Z,{item:!0,sm:4,md:4,lg:4,xl:4},r().createElement(ne,{classes:t,data:e.data,change:I,trending:T,reset:F,layout:e.width}))),r().createElement(d.Z,{item:!0,xs:12,sm:12,md:12,lg:8,xl:8},r().createElement(j.Z,{className:t.paper},r().createElement(d.Z,{container:!0,direction:"row",spacing:1,sm:12,justify:"space-around"},r().createElement(d.Z,{item:!0,xs:11,sm:11},r().createElement(ie,{colors:t.graph,scale:h,labelData:w.timestamp,envData:w.value,title:e.info.description,layout:e.width})),r().createElement(d.Z,{xs:1,sm:1},r().createElement(ge,{colors:t.slider,change:D}))))),null!==e.info.front.key&&"N/A"!==e.info.front.key&&r().createElement(d.Z,{item:!0,sm:12,alignItems:"baseline",justify:"space-around"},r().createElement(Ze,{classes:t,front:e.info.front})),r().createElement(d.Z,{item:!0,xs:12,sm:12},r().createElement(j.Z,{className:t.messages},r().createElement(d.Z,{container:!0,direction:"row",spacing:0,sm:12,alignItems:"center",justify:"space-around"},r().createElement(b,{classes:t}),r().createElement(ve,{classes:t,alert:e.info.trending}),r().createElement(O.Z,{xsDown:!0},r().createElement(Ee,{classes:t,prediction:e.info.prediction}),r().createElement(Le,{classes:t,reset:F,save:e.save}))))))),"on"===g.footer&&r().createElement(u.Z,{className:t.footer},r().createElement(d.Z,{container:!0,spacing:P},r().createElement(j.Z,{className:t.paper}," © 2021, Inspired Technologies",g.size&&" ["+g.size+"]"," "))))))};Me.propTypes={data:c().isRequired,info:c().isRequired,save:c().func.isRequired,width:c().oneOf(["lg","md","sm","xl","xs"]).isRequired};var Re=(0,q.ZP)()(Me);const Oe=a(4147).name.replace(/[-@/]/g,"_"),qe=e=>{let t;try{t=JSON.parse(window.localStorage.getItem(Oe))}catch(e){t={}}window.localStorage.setItem(Oe,JSON.stringify({...t,config:e}))},$e=()=>{try{const e="undefined"!=typeof window?window.innerWidth:null,t="undefined"!=typeof window?window.innerHeight:null,a=JSON.parse(window.localStorage.getItem(Oe));return a.config?{header:"off",footer:"off",size:e&&t?e+"x"+t:"",spacing:1,interval:1e4,timescale:3,interpolation:a.config.interpolation?a.config.interpolation:"linear",type:e<400?"Barometer":"Barograph"}:{header:"off",footer:"off",size:e&&t?e+"x"+t:"",spacing:1,interval:1e4,timescale:3,interpolation:"linear",type:e<400?"Barometer":"Barograph"}}catch(e){const t="undefined"!=typeof window?window.innerWidth:null,a="undefined"!=typeof window?window.innerHeight:null;return{header:"off",footer:"off",size:t&&a?t+"x"+a:"",spacing:1,interval:1e4,timescale:3,interpolation:"linear",type:t<400?"Barometer":"Barograph"}}},He=(0,l.Z)({palette:{primary:{main:"#26323F"},secondary:{main:"#A63400"},text:{light:"#97C8EB",main:"#7DBBE6",dark:"#5782A1"},success:{main:"#7DBBE6"},info:{main:"#5782A1"},contrastThreshold:3,tonalOffset:.2,background:{default:"#26323F"}}}),We={};var _e=e=>{const[t,a]=(0,n.useState)({}),[l,o]=(0,n.useState)((0,y.getInitial)().values),[c,m]=(0,n.useState)((0,y.getInitial)().info),[u,d]=(0,n.useState)({}),[p,f]=(0,n.useState)($e);return(0,n.useEffect)((()=>{if(e.adminUI.getApplicationUserData("0.2.0").then((e=>{e.hasOwnProperty("subscriptions")&&(We[e.subscriptions.altitude]=(e,t)=>(0,i.onAltitudeUpdate)(e,t),We[e.subscriptions.pressure]=(e,t)=>(0,y.onPressureUpdate)(e,t),We[e.subscriptions.temperature]=(e,t)=>(0,i.onTemperatureUpdate)(e,t),e.status="subscribed","Pressure"===i.defaultConfig.environment&&((0,i.setConfig)({subscribed:e.subscriptions.pressure.split(".")[1]}),(0,ee.setInflux)(e.influx,e.subscriptions.pressure.split(".")[1]))),e.hasOwnProperty("barometer")?(We[e.barometer+"trend"]=(e,t)=>(0,y.onTrendUpdate)(e,t),We[e.barometer+"trend.difference"]=(e,t)=>(0,y.onDifferenceUpdate)(e,t),We[e.barometer+"trend.period"]=(e,t)=>(0,i.onPeriodUpdate)(e,t),We[e.barometer+"description"]=(e,t)=>(0,y.onWeatherUpdate)(e,t),We[e.barometer+"prediction"]=(e,t)=>(0,y.onPredictionUpdate)(e,t),We[e.barometer+"wind.predicted"]=(e,t)=>(0,y.onWindUpdate)(e,t),We[e.barometer+"front.predicted"]=(e,t)=>(0,y.onFrontUpdate)(e,t)):(We["environment.barometer.trend"]=(e,t)=>(0,y.onTrendUpdate)(e,t),We["environment.barometer.trend.difference"]=(e,t)=>(0,y.onDifferenceUpdate)(e,t),We["environment.barometer.trend.period"]=(e,t)=>(0,i.onPeriodUpdate)(e,t),We["environment.barometer.description"]=(e,t)=>(0,y.onWeatherUpdate)(e,t),We["environment.barometer.prediction"]=(e,t)=>(0,y.onPredictionUpdate)(e,t),We["environment.barometer.wind.predicted"]=(e,t)=>(0,y.onWindUpdate)(e,t),We["environment.barometer.front.predicted"]=(e,t)=>(0,y.onFrontUpdate)(e,t)),a(e)})),e.loginStatus.status&&"loggedIn"===e.loginStatus.status&&t.hasOwnProperty("subscriptions")){const t=e.adminUI.openWebsocket({subscribe:"none"});t.onopen=()=>{t.send(JSON.stringify({context:"vessels.self",subscribe:Object.keys(We).map((e=>({path:e})))}))},t.onmessage=e=>{const t=JSON.parse(e.data);(t.updates||[]).forEach((e=>{(e.values||[]).forEach((e=>{const a=We[e.path];if(d({delta:t}),a&&a(e.value,p.interval))if(e.path.includes("pressure")||e.path.includes("difference")){let e=(0,y.getLatest)().values;o(e)}else{let e=(0,y.getLatest)().info;m(e)}}))}))}}}),[t.status,e.loginStatus]),!e.loginStatus.status||"notLoggedIn"===e.loginStatus.status&&e.loginStatus.authenticationRequired?r().createElement(e.adminUI.Login,null):r().createElement("div",{id:"app-panel"},r().createElement(r().StrictMode,null,r().createElement(s.Z,{theme:He},r().createElement(i.default.Provider,{value:p},"Barometer"===p.type?r().createElement(R,{data:l,info:c}):r().createElement(Re,{data:l,info:c,save:qe})))))}},7134:function(e,t,a){"use strict";a.r(t),a.d(t,{BaroContext:function(){return l},defaultConfig:function(){return s},onAltitudeUpdate:function(){return c},onPeriodUpdate:function(){return o},onTemperatureUpdate:function(){return m},setConfig:function(){return i}});var n=a(624);const r=(0,n.createContext)();t.default=r;const l=(0,n.createContext)(),s={unit:"hPa",environment:"Pressure",trending:{snap:3,threshold:.5},elevation:{current:0,calc:!1},timescale:3,temperature:288.15};function i(e){return e.subscribed&&(s.environment=e.subscribed.charAt(0).toUpperCase()+e.subscribed.slice(1)),e.unit&&(s.unit=e.unit),void 0!==e.calc&&(s.elevation.calc=e.calc),e.timescale&&(s.timescale=e.timescale),!0}function o(e,t){return s.trending.snap=Math.floor(e/60/60),!0}function c(e,t){return s.elevation.current=null!==e?e:0,!0}function m(e,t){return s.temperature=null!==e?e:252.15,!0}},5305:function(e,t,a){var n=a(5108);const r=a(7501),{InfluxDB:l}=a(7658),s=a(7134),i=a(6799),o=s.defaultConfig;let c,m,u,d,p,f,g,h=3,v=!1;function b(e){return e=o.elevation.calc&&o.elevation.current&&o.temperature?i.toTarget("Pa",i.toSeaLevel(e,o.elevation.current,o.temperature),o.unit,"Pa"===o.unit?0:"atm"===o.unit?4:2).value:"Pa"!==o.unit?i.toTarget("Pa",e,o.unit,"atm"===o.unit?4:2).value:e.toFixed(0),parseFloat(e)}e.exports={getInflux:function(){return c?u:"influxDB not connected"},setInflux:function(e,t){if(e){let a={url:e.url,token:e.token,timeout:6e4};c=new l(a),m=e.org,u=e.write,p=e.write,d=e.read,h=e.retention,g=e.id,f=t}},fluxQuery:function(e,t,a){return u=a<=h?p:d,('from(bucket: "$bucket") |> range(start: -$retentionh) |> filter(fn: (r) => r["_measurement"] == "pressure")  |> filter(fn: (r) => r["_field"] == "$value") |> filter(fn: (r) => r["environment"] == "$key") '+(g?' |> filter(fn: (r) => r["id"] == "$id") |> filter(fn: (r) => r["source"] != "") '.replace("$id",g):"")+(""===m?' |> window(every: 1m) |> yield(name: "value") ':' |> aggregateWindow(every: 1m, fn: mean, createEmpty: false) |> yield(name: "value") ')).replace("$bucket",""!==e?e:""!==m?u:u.split("/")[0]).replace("$value",u===p?"value":"average").replace("$key",""!==t?t:f).replace("$retention",a||h)},queryInflux:function(e,t){n.log("\n*** QUERY ***");let a=[];if(c&&!v)c.getQueryApi(m).queryRows(e,{next(e,t){const n=t.toObject(e);a.push({value:b(n._value),time:new Date(n._time).getTime()})},error(e){n.log("QUERY FAILED",e),v="Failed to fetch"===e.message||!0},complete(){n.log("QUERY FINISHED"),v=!1,t(a)}});else if(c&&v){let e=new Headers;e.append("Authorization",""===m?"Basic "+r.encode(c._options.token):"Token "+c._options.token),url=c._options.url.replace("/api/v2/query","");var l={method:"GET",headers:e,redirect:"follow"};fetch(url+"/query?q="+(3,u=3<=h?p:d,"select time, mean($value) as value from pressure where time>now()-$retentionh and environment='$key' and id='$id' group by time(1m)&db=$bucket".replace("$bucket",""!==m?u:u.split("/")[0]).replace("$value",u===p?"value":"average").replace("$key",f).replace("$id",g).replace("$retention",h)),l).then((e=>e.text())).then((e=>{JSON.parse(e).results[0].series[0].values.forEach((e=>{null!==e[1]&&a.push({time:new Date(e[0]).getTime(),value:b(e[1])})})),n.log("REQUEST FINISHED"),t(a)})).catch((e=>n.log("REQUEST FAILED",e)))}return a}}},6799:function(e){const t=[{bft:0,min:0,max:.3},{bft:1,min:.3,max:1.6},{bft:2,min:1.6,max:3.4},{bft:3,min:3.4,max:5.5},{bft:4,min:5.5,max:8},{bft:5,min:8,max:10.8},{bft:6,min:10.8,max:13.9},{bft:7,min:13.9,max:17.2},{bft:8,min:17.2,max:20.8},{bft:9,min:20.8,max:24.5},{bft:10,min:24.5,max:28.5},{bft:11,min:28.5,max:32.7},{bft:12,min:32.7,max:99.9}];function a(e,a){return"string"==typeof e&&(e=Number(e)),void 0===a||"min"!==a&&"max"!==a?.836*Math.pow(e,1.5):e>=0&&e<=12?"min"==a?t[e].min:"max"==a?t[e].max:null:null}function n(e){return Math.round(Math.pow(e/.836),2/3)}e.exports={toBeaufort:n,fromBeaufort:a,toSeaLevel:function(e,t,a){return e*Math.pow(1-.0065*t/(a+.0065*t),-5.257)},toStationAltitude:function(e,t,a){return e*Math.pow(1-.0065*t/(a+.0065*t),5.257)},toDegreesMinutesAndSeconds:function(e){var t=Math.abs(e),a=Math.floor(t),n=60*(t-a),r=Math.floor(n);return a+"°"+r+"'"+Math.floor(60*(n-r))+'"'},toSignalK:function(e,t){let n;return"%"===e?(t/=100,n="ratio"):"°C"===e||"deg"===e?(t+=273.15,n="K"):"°F"===e?(t=5/9*(t-32)+273.15,n="K"):"kmh"===e?(t/=3.6,n="m/s"):"kn"===e?(t/=1.943844,n="m/s"):e.includes("Bft")?(t=a(t,"BftMin"===e?"min":"BftMax"===e?"max":""),n="m/s"):"°"===e?(t*=Math.PI/180,n="rad"):"Pa"===e?n="Pa":"hPa"===e||"mbar"===e?(t*=100,n="Pa"):"km"===e?(t*=1e3,n="m"):"nm"===e?(t*=1852,n="m"):"m"===e?n="m":"unixdate"===e&&(t=new Date(1e3*t).toISOString(),n=""),{value:t,units:n}},toTarget:function(e,t,a,r){let l;if("geoJson"===a||"latLng"===a){let e=[];t.longitude&&t.latitude&&"geoJson"===a?(e.push("number"==typeof r?t.longitude.toFixed(r):t.longitude),e.push("number"==typeof r?t.latitude.toFixed(r):t.latitude),t.altitude&&e.push(t.altitude),t=e):t.longitude&&t.latitude&&"latLng"===a?(e.push("number"==typeof r?t.latitude.toFixed(r):t.latitude),e.push("number"==typeof r?t.longitude.toFixed(r):t.longitude),t.altitude&&e.push(t.altitude),t=e):t=null,l=a}else"ratio"===e&&void 0===a?(t*=100,l=""):"ratio"!==e||"decimal"!==a&&"number"!==a?"K"===e&&void 0===a?l="K":"K"!==e||"°C"!==a&&"deg"!==a?"K"===e&&"°F"===a?(t=1.8*(t-273.15)+32,l=a):"m/s"===e&&"undefined"===a?l="m/s":"m/s"===e&&"kn"===a?(t*=1.943844,l=a):"m/s"===e&&"km"===a?(t*=3.6,l=a):"m/s"===e&&"kn"===a?(t*=1.943844,l=a):"m/s"===e&&"Bft"===a?(t=n(t),l=a):"rad"!==e||"°"!==a&&""!==a?"Pa"===e&&void 0===a?l="Pa":"Pa"!==e||"hPa"!==a&&"mbar"!==a?"Pa"===e&&"atm"===a?(t/=101325,l=a):"m"===e&&void 0===a?l="m":"m"===e&&"km"===a?(t/=1e3,l="km"):"m"===e&&"nm"===a?(t/=1852,l="nm"):"dt"!==e||"ms"!==a&&"unixdate"!==a?"dt"===e&&"s"===a?(t=new Date(t).getTime()/1e3,l="s"):l=e:(t=new Date(t).getTime(),l="ms"):(t/=100,l=a):(t*=180/Math.PI,l="°"):(t-=273.15,l=a):l="";return"geoJson"!==a&&"latLng"!==a&&"number"==typeof r&&(t=parseFloat(t.toFixed(r))),{value:t,units:l}}}},6608:function(e,t,a){var n=a(5108);const r=a(7134),l=a(6799),s=r.defaultConfig,i={timestamp:Date.now(),pressure:null,trend:null},o={timestamp:Date.now(),description:"initializing ...",prediction:{type:"info",value:"",season:""},wind:{predicted:""},front:{key:"N/A"},trending:null},c={timestamp:i.timestamp,pressure:{value:null,time:null},trend:{value:null,time:null}},m={timestamp:o.timestamp,description:o.description,prediction:o.prediction,wind:o.wind,front:o.front,trending:o.trending};e.exports={getInitial:function(){return{values:i,info:o}},getLatest:function(){return{values:c,info:m}},onPressureUpdate:function(e,t){return Date.now()-c.pressure.time>t&&(c.pressure.time=Date.now(),c.pressure.value!==e&&(c.timestamp=c.pressure.time),s.elevation.calc&&s.elevation.current&&s.temperature?c.pressure.value=l.toTarget("Pa",l.toSeaLevel(e,s.elevation.current,s.temperature),s.unit,"Pa"===s.unit?0:"atm"===s.unit?4:2).value:"Pa"!==s.unit?c.pressure.value=l.toTarget("Pa",e,s.unit,"atm"===s.unit?4:2).value:c.pressure.value=e.toFixed(0),!0)},onTrendUpdate:function(e,t){return m.trending=e,!0},onDifferenceUpdate:function(e,t){return Date.now()-c.trend.time>t&&(c.trend.time=Date.now(),c.trend.value!==e&&(c.timestamp=c.trend.time),"hPa"!==s.unit&&"mbar"!==s.unit?c.trend.value=l.toTarget("Pa",e,s.unit,"Pa"===s.unit?0:"atm"===s.unit?4:2).value:c.trend.value=(e/100).toFixed(2),!0)},onWeatherUpdate:function(e,t){return m.description!==e&&(m.description=e,m.timestamp=Date.now(),!0)},onPredictionUpdate:function(e,t){if(m.prediction.value!==e){let t=e,a="info";return m.trending.hasOwnProperty("severity")&&3===Math.abs(m.trending.severity)?(a="warning",e="Pressure "+m.trending.tendency.toLowerCase()+" "+m.trending.changerate.toLowerCase()):m.trending.hasOwnProperty("severity")&&4===Math.abs(m.trending.severity)&&(a="alert",e="Pressure "+m.trending.tendency.toLowerCase()+" "+m.trending.changerate.toLowerCase()),null!==m.wind&&""!==m.wind.predicted&&(e+=", predicted wind "+m.wind.predicted.replace("Less","less")),m.prediction={type:a,value:e,season:t},m.timestamp=Date.now(),!0}return!1},onWindUpdate:function(e,t){return m.wind.predicted!==e&&(m.wind={predicted:e},m.timestamp=Date.now(),!0)},onFrontUpdate:function(e,t){return m.front!==e&&(m.front=e,m.timestamp=Date.now(),!0)},getData:function(e,t){try{if(null!==e)return{value:e.value,time:e.time,unit:t}}catch(e){n.error(`Error converting item to ${t}`,e)}},queryData:function(e,t){try{let e=[];return t&&null!==t&&e.push({value:t.value,timestamp:t.time}),e}catch(t){n.error(`Error getting item ${e} from SignalK/influx`,t)}}}},6700:function(e,t,a){var n={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":7060,"./it-ch":150,"./it-ch.js":150,"./it.js":7060,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":3926,"./kn.js":3926,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function r(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=l,e.exports=r,r.id=6700},2361:function(){},4616:function(){},4147:function(e){"use strict";e.exports=JSON.parse('{"name":"signalk-barograph","description":"Barograph component visualizing atmospheric pressure data and barometer trends","version":"0.2.0","main":"index.js","private":true,"keywords":["signalk-embeddable-webapp"],"author":"tkrofta","license":"Apache-2.0","dependencies":{"@fontsource/roboto":"^4.2.2","@influxdata/influxdb-client":"^1.10.0","@influxdata/influxdb-client-apis":"^1.10.0","@material-ui/core":"^4.11.3","@material-ui/icons":"^4.11.2","@material-ui/lab":"^4.0.0-alpha.57","@testing-library/jest-dom":"^5.11.9","@testing-library/react":"^11.2.5","@testing-library/user-event":"^12.8.3","base-64":"^1.0.0","chart.js":"^2.9.4","console-browserify":"^1.2.0","fontsource-roboto":"^4.0.0","moment":"^2.29.3","react":"^16.14.0","react-chartjs-2":"^2.11.1","react-dom":"^16.14.0","react-scripts":"^5.0.1","web-vitals":"^1.1.0"},"scripts":{"dev":"webpack --config webpack.config.js --watch --mode development","start":"webpack serve --open --config webpack.config.js","build":"webpack --config webpack.prod.js"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"homepage":".","devDependencies":{"@babel/core":"^7.13.10","@babel/preset-react":"^7.12.13","assert":"^2.0.0","babel-loader":"^8.2.2","browser":"^0.2.6","browserify-zlib":"^0.2.0","buffer":"^6.0.3","html-webpack-plugin":"^5.3.1","https-browserify":"^1.0.0","node-polyfill-webpack-plugin":"^1.1.0","process":"^0.11.10","source-map-loader":"^2.0.1","stream-browserify":"^3.0.0","stream-http":"^3.1.1","util":"^0.12.3","webpack":"^5.28.0","webpack-cli":"^4.5.0"}}')}}]);